<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>After School Classes</title>
  <!-- Import Vue.js -->
  <script src="https://unpkg.com/vue@2.7.8/dist/vue.js"></script>
  <!-- Load Font Awesome from a stable CDN -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
  <link rel="stylesheet" href="styles.css">
</head>
<body>

  <div id="app">
    <!-- Sort Options -->
    <div class="sort-options">
        <label for="sortAttribute">Sort by:</label>
        <select v-model="sortAttribute" id="sortAttribute">
          <option value="subject">Subject</option>
          <option value="location">Location</option>
          <option value="price">Price</option>
          <option value="space">Spaces</option>
        </select>
  
        <label for="sortOrder">Order:</label>
        <select v-model="sortOrder" id="sortOrder">
          <option value="asc">Ascending</option>
          <option value="desc">Descending</option>
        </select>
      </div>

    <!-- Loop over each class to generate a card -->
    <class-card
      v-for="(classInfo, index) in classes"
      :key="index"
      :subject="classInfo.subject"
      :location="classInfo.location"
      :price="classInfo.price"
      :space="classInfo.space"
      :icon="classInfo.icon"
    />
  </div>

  <script>
    // Vue.js App Initialization
    new Vue({
      el: '#app',
      data() {
        return {
            sortAttribute: 'subject', // default sorting attribute
            sortOrder: 'asc', // default sorting order
            // Array of lessons with 10 entries, each having 5 available spaces and a Font Awesome icon
            classes: [
                { subject: "Mathematics", location: "Room 101", price: 50, space: 5, icon: 'fa fa-calculator' },
                { subject: "Science", location: "Lab 3", price: 40, space: 5, icon: 'fa fa-flask' },
                { subject: "Art", location: "Room 204", price: 30, space: 5, icon: 'fa fa-paint-brush' },
                { subject: "History", location: "Room 301", price: 35, space: 5, icon: 'fa fa-landmark' },
                { subject: "Music", location: "Music Hall", price: 45, space: 5, icon: 'fa fa-music' },
                { subject: "Computer Science", location: "Lab 1", price: 55, space: 5, icon: 'fa fa-laptop-code' },
                { subject: "English", location: "Room 102", price: 25, space: 5, icon: 'fa fa-book' },
                { subject: "Physical Education", location: "Gym", price: 20, space: 5, icon: 'fa fa-basketball-ball' },
                { subject: "Chemistry", location: "Lab 5", price: 60, space: 5, icon: 'fa fa-atom' },
                { subject: "Biology", location: "Lab 2", price: 50, space: 5, icon: 'fa fa-leaf' }
            ],
        };
      },
      computed: {
        // Computed property to return sorted classes based on the selected attribute and order
        sortedClasses() {
          // Clone the classes array to avoid mutating the original array
          let sorted = [...this.classes];
          
          // Sort by the selected attribute
          sorted.sort((a, b) => {
            let comparison = 0;

            // Compare by different data types (string or number)
            if (typeof a[this.sortAttribute] === 'string') {
              comparison = a[this.sortAttribute].localeCompare(b[this.sortAttribute]);
            } else {
              comparison = a[this.sortAttribute] - b[this.sortAttribute];
            }

            // If the order is descending, reverse the comparison result
            if (this.sortOrder === 'desc') {
              comparison = comparison * -1;
            }

            return comparison;
          });

          return sorted;
        }
      },
      // Registering the class card component
      components: {
        'class-card': {
          props: ['subject', 'location', 'price', 'space', 'icon'],
          template: `
            <div class="card">
              <!-- Font Awesome icon for the lesson -->
              <i :class="icon" class="icon"></i>
              <div>
                <h3>{{ subject }}</h3>
                <p><strong>Location:</strong> {{ location }}</p>
                <p><strong>Price:</strong> $ {{ price }}</p>
                <p><strong>Available Spots:</strong> {{ space }}</p>
              </div>
            </div>
          `,
        },
      },
    });
  </script>

</body>
</html>
